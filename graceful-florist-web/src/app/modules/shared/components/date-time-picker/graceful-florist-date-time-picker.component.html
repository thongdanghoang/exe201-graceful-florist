<div class="max-w-max">
    <mat-accordion>
        <mat-expansion-panel
            (opened)="panelOpenState.set(true)"
            (closed)="panelOpenState.set(false)"
        >
            <mat-expansion-panel-header>
                <mat-panel-title>{{ formatDate(selected) }}</mat-panel-title>
                <mat-panel-description>
                    {{ selectedChip ?? "Chọn giờ" }}
                </mat-panel-description>
            </mat-expansion-panel-header>
            <div class="flex flex-row gap-5">
                <div class="date-picker">
                    <mat-card class="demo-inline-calendar-card">
                        <mat-calendar [(selected)]="selected"></mat-calendar>
                    </mat-card>
                </div>
                <mat-divider [vertical]="true"></mat-divider>
                <div class="flex flex-col justify-around">
                    <div class="flex flex-col gap-2">
                        <mat-chip-listbox
                            class="mat-mdc-chip-set-stacked"
                            aria-label="Color selection"
                            (change)="selectChip($event)"
                        >
                            <div class="grid grid-cols-2 gap-2">
                                @for (chip of availableColors; track chip) {
                                    <mat-chip-option [color]="chip.color"
                                        >{{ chip.name }}
                                    </mat-chip-option>
                                }
                            </div>
                        </mat-chip-listbox>
                        @if ("Tùy Chọn" === selectedChip) {
                            <div class="flex gap-3">
                                <mat-form-field>
                                    <mat-label>Chọn giờ</mat-label>
                                    <mat-select
                                        [(value)]="selectedHour"
                                        (selectionChange)="selectHour($event)"
                                    >
                                        @for (hour of hours; track hour) {
                                            <mat-option [value]="hour">{{
                                                hour
                                            }}</mat-option>
                                        }
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>Chọn phút</mat-label>
                                    <mat-select
                                        [(value)]="selectedMinute"
                                        (selectionChange)="selectMinute($event)"
                                    >
                                        @for (minute of minutes; track minute) {
                                            <mat-option [value]="minute">{{
                                                minute
                                            }}</mat-option>
                                        }
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        }
                    </div>
                    <p class="max-w-md">
                        Dịch vụ theo lịch trình: phụ thu thêm 40.000 VNĐ, thời
                        gian vận chuyển sai số từ 15-20 phút
                    </p>
                    <button
                        mat-flat-button
                        color="primary"
                        (click)="closePanel()"
                    >
                        Xác Nhận
                    </button>
                </div>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>
